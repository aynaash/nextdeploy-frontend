[service]
name = "nextdeploy-frontend"
image = "nextdeploy/frontend"
version = "latest"

[deploy]
# Replace with your GCP VM details
host = "YOUR_GCP_VM_IP"  # Get from: gcloud compute instances describe nextdeploy-vm --format='get(networkInterfaces[0].accessConfigs[0].natIP)'
user = "YOUR_USERNAME"   # Your GCP username
ssh_key = "~/.ssh/nextdeploy_gcp"
port = 22

[container]
# Next.js runs on port 3000 inside container
port = 3000
# Map to port 80 on host (HTTP)
host_port = 80
# Health check endpoint
health_check = "/"
health_interval = "30s"
health_timeout = "10s"
health_retries = 3
# Restart policy
restart_policy = "unless-stopped"

[doppler]
# Doppler project and config
project = "nextdeploy-frontend"
config = "prod"
# Token should be set as environment variable: export DOPPLER_TOKEN="dp.st.prod.YOUR_TOKEN"
token_env = "DOPPLER_TOKEN"

[build]
# Docker build context
context = "."
dockerfile = "Dockerfile"
# Build args (optional)
# args = { NODE_ENV = "production" }

[logging]
# Log driver
driver = "json-file"
# Log options
max_size = "10m"
max_file = "3"
